#____GENERAL____

prefix : 'data/tune/'
restart  : FALSE

#____SCAFFOLDS____
default_scaffold_parameters:
  sigmoid_aggression : 6
  n_cells : 1000
  gamma : 0.1
  max_depth : 3
  max_width : 2
  ptime_beta : 0.5
  ptime_alpha : 1.

scaffolds:
  scaffold0:
    state_compositions:
    - - 1
      - 0
      - 0
      - 0
    - - 0.5
      - 0.35
      - 0.075
      - 0.075
    - - 0.2
      - 0.2
      - 0.30000000000000004
      - 0.30000000000000004
    - - 0.3
      - 0.625
      - 0.0375
      - 0.0375
    - - 0.1
      - 0
      - 0.7
      - 0.2
    - - 0.1
      - 0
      - 0.2
      - 0.7
    - - 0.1
      - 0.9
      - 0
      - 0
    - - 0.1
      - 0.9
      - 0
      - 0

#____TESTS____

test_replicates : 1

default_test_parameters:
  datasets:
    - data/benchmark_rna.h5ad
  feature_types:
    - RNA
  pure_states: [C, A, B, D]
  cell_state_col : cell_groups
  n_jobs : 5
  rd_stds : [0.45]

test_conditions:
  test1:
    rd_means : [4000]

#____PREPROCESSING____
default_preprocessing_parameters: 
  min_cells : 25

preprocessing:
  pca :
    script : pca-preprocess
    concurrent_job_penalty : 0
    parameters:
      min_dispersion : 0.7
      feature_type : RNA
  lsi :
    script : lsi-preprocess
    concurrent_job_penalty : 0
    parameters :
      feature_type : ATAC
  mira_monotonic :
    script : mira-preprocess
    concurrent_job_penalty : 1
    parameters:
      use_atac_features : FALSE
      min_dispersion : 0.7
      tune : TRUE
      min_epochs : 40
      max_epochs : 60
      kl_strategy : monotonic
  mira_cyclic : 
    script : mira-preprocess
    concurrent_job_penalty : 1
    parameters :
      use_atac_features : FALSE
      min_dispersion : 0.7
      tune : TRUE
      min_epochs : 40
      max_epochs : 60
      kl_strategy : cyclic

#____METHODS____
default_method_parameters: {}

methods :
  mira_tree :
    run_file : /liulab/alynch/projects/benchmarking/frankencell-dynverse/frankencell/methods/mira/run
    definition_file : /liulab/alynch/projects/benchmarking/frankencell-dynverse/frankencell/methods/mira/definition.yaml
    trials : 
      mira_cyclic_RNA_log:
        parameters: use_rep="RNA", box_cox=0
        preprocessing: mira_cyclic
      mira_cyclic_RNA_sqrt:
        parameters: use_rep="RNA", box_cox=0.5
        preprocessing: mira_cyclic
      mira_monotonic_RNA_log:
        parameters: use_rep="RNA", box_cox=0
        preprocessing: mira_monotonic
      mira_monotonic_RNA_sqrt:
        parameters: use_rep="RNA", box_cox=0.5
        preprocessing: mira_monotonic
  slingshot_pca : 
    run_file : /liulab/alynch/projects/benchmarking/frankencell-dynverse/frankencell/methods/custom_slingshot/run.R
    definition_file : /liulab/alynch/projects/benchmarking/frankencell-dynverse/frankencell/methods/custom_slingshot/definition.yaml
    trials:
      min_dim_3:
        parameters: min_dim=3
        preprocessing: pca
      min_dim_4:
        parameters: min_dim=4
        preprocessing: pca
      min_dim_5:
        parameters: min_dim=5
        preprocessing: pca
