
#____PREPROCESSING____
default_preprocessing_parameters: 
  use_atac_features : true
  use_rna_features : false
  peak_subset : /liulab/alynch/projects/benchmarking/2022-02-08_experiment/frankencell-dynverse/data/filtered_peaks.bed
  tuning_args:
    min_topics : 5
    min_epochs : 40
    max_epochs : 60
    max_dropout : 0.1
    top_n_trials : 5
    train_size : 0.9
    cv : shufflesplit
    batch_sizes : [32,64]
  atac_model_args:
    beta : 0.92
    batch_size : 64
    encoder_dropout : 0.05
    num_topics : 7
    decoder_dropout : 0.2
    num_epochs : 45    
    num_layers : 2
    hidden : 64
    seed : 2556

preprocessing:
  mira_no_tune_ATAC_m20:
    script : mira-preprocess
    concurrent_job_penalty : 1
    parameters:
      train_style : fit
      min_cells : 20
  mira_no_tune_ATAC_m30:
    script : mira-preprocess
    concurrent_job_penalty : 1
    parameters:
      train_style : fit
      min_cells : 30
  mira_no_tune_ATAC_m35:
    script : mira-preprocess
    concurrent_job_penalty : 1
    parameters:
      train_style : fit
      min_cells : 35
  mira_load_joint : 
    script : mira-preprocess
    concurrent_job_penalty : 1
    parameters:
      use_atac_features : true
      use_rna_features : true
      atac_prefix : mira_tune_ATAC
      rna_prefix : mira_tune
      train_style : load

#____METHODS____
default_method_parameters: {}

methods :
  mira_tree:
    run_file : /liulab/alynch/projects/benchmarking/2022-02-08_experiment/frankencell-dynverse/frankencell/methods/mira/run
    definition_file : /liulab/alynch/projects/benchmarking/2022-02-08_experiment/frankencell-dynverse/frankencell/methods/mira/definition.yaml
    trials:
      mira_no_tune_ATAC_m20:
        parameters: use_rep="ATAC", box_cox=0.25
        preprocessing: mira_no_tune_ATAC_m25
      mira_no_tune_ATAC_m30:
        parameters: use_rep="ATAC", box_cox=0.25
        preprocessing: mira_no_tune_ATAC_m35
      mira_no_tune_ATAC_m35:
        parameters: use_rep="ATAC", box_cox=0.25
        preprocessing: mira_no_tune_ATAC_m35
      mira_JOINT : 
        parameters: use_rep="joint", box_cox=0.25
        preprocessing: mira_load_joint
      mira_JOINT_CONSTRAINED :
        parameters: use_rep="joint_constrained", box_cox=0.25
        preprocessing: mira_load_joint

